(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(24)},,,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var l=n(0),a=n.n(l),r=n(4),u=n.n(r),o=(n(15),n(5)),i=n(1),c=n(2),s=n(7),m=n(6),d=n(8),f=(n(16),n(17),n(18),n(19),function(e){var t=e.colsnum,n=e.difficulty,l=e.onSubmit,r=e.updateFieldSettigns,u=e.updateLevelSettings,o=1===n?"easy":2===n?"medium":"hard",i="".concat(t,"x").concat(t);return a.a.createElement("form",{action:"",className:"input-form",onSubmit:l},a.a.createElement("h1",null,"Minesweeper"),a.a.createElement("label",null,a.a.createElement("div",null,"Field size"),a.a.createElement("div",null,a.a.createElement("i",{className:"fa fa-chevron-left",onClick:function(){return r(-5)}}),i,a.a.createElement("i",{className:"fa fa-chevron-right",onClick:function(){return r(5)}}))),a.a.createElement("label",null,a.a.createElement("div",null,"Difficulty"),a.a.createElement("div",null,a.a.createElement("i",{className:"fa fa-chevron-left",onClick:function(){return u(-1)}}),a.a.createElement("span",null,o),a.a.createElement("i",{className:"fa fa-chevron-right",onClick:function(){return u(1)}}))),a.a.createElement("button",{className:"btn btn-success"},"Start game"))}),v=(n(20),function(e){var t=e.cell,n=e.onContextMenu,l=e.onClick,r=e.col,u=e.row,o=0===t.value?"green-cell":"b"===t.value?"red-cell":"blue-cell";t.open||(o="blocked-cell"),t.marked&&(o="marked-cell");var i=t.open?0===t.value?null:t.detonated?a.a.createElement("i",{className:"fa fa-bomb detonated"}):"b"===t.value?a.a.createElement("i",{className:"fa fa-bomb grey"}):t.value:t.marked?a.a.createElement("i",{className:"fa fa-flag red"}):null;return a.a.createElement("div",{className:o,onContextMenu:n,onClick:l,"data-col":r,"data-row":u},a.a.createElement("span",{className:"cell-value"},i))}),p=(n(21),function(e){var t=e.field.map(function(t,n){for(var l=[],r=0;r<t.length;r++){var u="".concat(n).concat(r);l.push(a.a.createElement(v,{cell:t[r],key:u,onContextMenu:e.onContextMenu,onClick:e.onClick,col:n,row:r,rowsnum:e.rowsnum}))}return a.a.createElement("div",{key:n,className:"column"},l)}),n={fontSize:10===e.rowsnum?"200%":15===e.rowsnum?"150%":"100%"};return a.a.createElement("div",{className:"Game",style:n},t)}),C=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"getRand",value:function(e){return Math.floor(Math.random()*e)}},{key:"countCellsToOpen",value:function(e){return e.reduce(function(e,t){return e+t.filter(function(e){return"b"!==e.value}).length},0)}},{key:"generateField",value:function(e,t,n){for(var l=[],a=0;a<e;a++){l[a]=[];for(var r=0;r<t;r++)l[a][r]={value:0,open:!1,marked:!1}}for(var u=1===n?.14:2===n?.19:.24,o=Math.floor(e*t*u),i=0;i<o;i++){var c=this.getRand(e),s=this.getRand(t);if("b"!==l[c][s].value){l[c][s].value="b";var m=c<e-1,d=s>0,f=s<t-1;c>0&&(d&&!isNaN(l[c-1][s-1].value)&&(l[c-1][s-1].value+=1),isNaN(l[c-1][s].value)||(l[c-1][s].value+=1),f&&!isNaN(l[c-1][s+1].value)&&(l[c-1][s+1].value+=1)),d&&!isNaN(l[c][s-1].value)&&(l[c][s-1].value+=1),f&&!isNaN(l[c][s+1].value)&&(l[c][s+1].value+=1),m&&(d&&!isNaN(l[c+1][s-1].value)&&(l[c+1][s-1].value+=1),isNaN(l[c+1][s].value)||(l[c+1][s].value+=1),f&&!isNaN(l[c+1][s+1].value)&&(l[c+1][s+1].value+=1))}}return{field:l,startGame:!0,allCells:this.countCellsToOpen(l)}}}]),e}(),h=(n(22),function(e){var t=e.newGame;return a.a.createElement("div",{className:"GameOver"},a.a.createElement("p",null,"Game Over",a.a.createElement("button",{className:"btn btn-primary",onClick:t},"Try new game")))}),g=(n(23),function(e){var t=e.newGame;return a.a.createElement("div",{className:"Winner"},a.a.createElement("p",null,"Congratulations, You won!",a.a.createElement("button",{className:"btn btn-primary",onClick:t},"Try new game")))}),b=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={colsnum:10,rowsnum:10,difficulty:1,field:null,startGame:!1,gameOver:!1,allCells:null,openedCells:0},n.GameFieldGenerator=new C,n.handleInput=function(e){var t=e.target;n.setState(Object(o.a)({},t.name,parseInt(t.value)))},n.updateFieldSettigns=function(e){var t=n.state.rowsnum+e;t>20||t<10||n.setState({rowsnum:t,colsnum:t})},n.updateLevelSettings=function(e){var t=n.state.difficulty+e;t>3||t<1||n.setState({difficulty:t})},n.handleForm=function(e){e.preventDefault();var t=n.state,l=t.colsnum,a=t.rowsnum,r=t.difficulty,u=n.GameFieldGenerator.generateField(l,a,r);n.setState(u)},n.handleRightClick=function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-col"),l=e.currentTarget.getAttribute("data-row"),a=n.state.field;a[t][l].open||(a[t][l].marked=!a[t][l].marked,n.setState({field:a}))},n.handleLeftClick=function(e){var t=e.currentTarget.getAttribute("data-col"),l=e.currentTarget.getAttribute("data-row"),a=n.state,r=a.field,u=a.allCells;if(!r[t][l].open&&!r[t][l].marked){if(0===r[t][l].value&&n.setState({field:n.openAllCellsBeside(parseInt(t),parseInt(l),r)}),"b"===r[t][l].value)return n.openAllCells(t,l),void n.setState({gameOver:!0});r[t][l].open=!0;var o=n.countOpenedCells(r);u===o&&n.openAllCells(),n.setState({openedCells:o,field:r})}},n.countOpenedCells=function(e){return e.reduce(function(e,t){return e+t.filter(function(e){return e.open}).length},0)},n.openAllCellsBeside=function(e,t,l){var a=n.state,r=a.colsnum,u=a.rowsnum,o=l;o[e][t].open=!0;var i=function(e,t){o[e][t].open=!0,o[e][t].marked=!1},c=e<r-1,s=t>0,m=t<u-1;return e>0&&(s&&(0!==o[e-1][t-1].value||o[e-1][t-1].open?i(e-1,t-1):o=n.openAllCellsBeside(e-1,t-1,o)),0!==o[e-1][t].value||o[e-1][t].open?i(e-1,t):o=n.openAllCellsBeside(e-1,t,o),m&&(0!==o[e-1][t+1].value||o[e-1][t+1].open?i(e-1,t+1):o=n.openAllCellsBeside(e-1,t+1,o))),s&&(0!==o[e][t-1].value||o[e][t-1].open?i(e,t-1):o=n.openAllCellsBeside(e,t-1,o)),m&&(0!==o[e][t+1].value||o[e][t+1].open?i(e,t+1):o=n.openAllCellsBeside(e,t+1,o)),c&&(s&&(0!==o[e+1][t-1].value||o[e+1][t-1].open?i(e+1,t-1):o=n.openAllCellsBeside(e+1,t-1,o)),0!==o[e+1][t].value||o[e+1][t].open?i(e+1,t):o=n.openAllCellsBeside(e+1,t,o),m&&(0!==o[e+1][t+1].value||o[e+1][t+1].open?i(e+1,t+1):o=n.openAllCellsBeside(e+1,t+1,o))),o},n.openAllCells=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=n.state,a=l.field,r=l.colsnum,u=l.rowsnum;null!==e&&null!==t&&(a[e][t].detonated=!0);for(var o=0;o<r;o++)for(var i=0;i<u;i++)a[o][i].open=!0,null===e&&null===t&&"b"===a[o][i].value&&(a[o][i].marked=!0);n.setState({field:a})},n.newGame=function(){n.setState({startGame:!1,gameOver:!1,field:null,allCells:null,openedCells:0})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.colsnum,n=e.rowsnum,l=e.difficulty,r=e.startGame,u=e.field,o=e.gameOver,i=e.allCells,c=e.openedCells;return a.a.createElement("div",{className:"App"},r?a.a.createElement(p,{field:u,rowsnum:n,onContextMenu:this.handleRightClick,onClick:this.handleLeftClick}):a.a.createElement(f,{colsnum:t,difficulty:l,onChange:this.handleInput,onSubmit:this.handleForm,updateFieldSettigns:this.updateFieldSettigns,updateLevelSettings:this.updateLevelSettings}),o?a.a.createElement(h,{newGame:this.newGame}):null,r&&i===c?a.a.createElement(g,{newGame:this.newGame}):null)}}]),t}(l.Component);u.a.render(a.a.createElement(b,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.38534032.chunk.js.map