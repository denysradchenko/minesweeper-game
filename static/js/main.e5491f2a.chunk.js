(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,n,t){e.exports=t(24)},,,,,,function(e,n,t){},function(e,n,t){},,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(0),l=t.n(a),r=t(4),o=t.n(r),u=(t(15),t(5)),s=t(1),i=t(2),c=t(7),m=t(6),d=t(8),f=(t(16),t(17),t(18),t(19),function(e){var n=e.colsnum,t=e.difficulty,a=e.onSubmit,r=e.updateFieldSettigns,o=e.updateLevelSettings,u=1===t?"easy":2===t?"medium":"hard",s="".concat(n,"x").concat(n);return l.a.createElement("form",{action:"",className:"input-form",onSubmit:a},l.a.createElement("h1",null,"Minesweeper"),l.a.createElement("label",null,l.a.createElement("div",null,"Field size"),l.a.createElement("div",null,l.a.createElement("i",{className:"fa fa-chevron-left",onClick:function(){return r(-5)}}),s,l.a.createElement("i",{className:"fa fa-chevron-right",onClick:function(){return r(5)}}))),l.a.createElement("label",null,l.a.createElement("div",null,"Difficulty"),l.a.createElement("div",null,l.a.createElement("i",{className:"fa fa-chevron-left",onClick:function(){return o(-1)}}),l.a.createElement("span",null,u),l.a.createElement("i",{className:"fa fa-chevron-right",onClick:function(){return o(1)}}))),l.a.createElement("button",{className:"btn btn-success"},"Start game"))}),v=(t(20),function(e){var n=e.cell,t=e.onContextMenu,a=e.onClick,r=e.col,o=e.row,u=0===n.value?"green-cell":"b"===n.value?"red-cell":"blue-cell";n.open||(u="blocked-cell"),n.marked&&(u="marked-cell");var s=n.open?0===n.value?null:n.detonated?l.a.createElement("i",{className:"fa fa-bomb detonated"}):"b"===n.value?l.a.createElement("i",{className:"fa fa-bomb grey"}):n.value:n.marked?l.a.createElement("i",{className:"fa fa-flag red"}):null;return l.a.createElement("div",{className:u,onContextMenu:t,onClick:a,"data-col":r,"data-row":o},l.a.createElement("span",{className:"cell-value"},s))}),p=(t(21),function(e){var n=e.field.map(function(n,t){for(var a=[],r=0;r<n.length;r++){var o="".concat(t).concat(r);a.push(l.a.createElement(v,{cell:n[r],key:o,onContextMenu:e.onContextMenu,onClick:e.onClick,col:t,row:r,rowsnum:e.rowsnum}))}return l.a.createElement("div",{key:t,className:"column"},a)}),t={fontSize:10===e.rowsnum?"200%":15===e.rowsnum?"150%":"100%"},a=e.sensorFlag?"sensor-flag sensor-flag-on":"sensor-flag";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:a,onClick:e.handleSensorFlag},l.a.createElement("i",{className:"fa fa-flag"})),l.a.createElement("div",{className:"Game",style:t},n))}),g=function(){function e(){Object(s.a)(this,e)}return Object(i.a)(e,[{key:"getRand",value:function(e){return Math.floor(Math.random()*e)}},{key:"countCellsToOpen",value:function(e){return e.reduce(function(e,n){return e+n.filter(function(e){return"b"!==e.value}).length},0)}},{key:"generateField",value:function(e,n,t){for(var a=[],l=0;l<e;l++){a[l]=[];for(var r=0;r<n;r++)a[l][r]={value:0,open:!1,marked:!1}}for(var o=1===t?.14:2===t?.19:.24,u=Math.floor(e*n*o),s=0;s<u;s++){var i=this.getRand(e),c=this.getRand(n);if("b"!==a[i][c].value){a[i][c].value="b";var m=i<e-1,d=c>0,f=c<n-1;i>0&&(d&&!isNaN(a[i-1][c-1].value)&&(a[i-1][c-1].value+=1),isNaN(a[i-1][c].value)||(a[i-1][c].value+=1),f&&!isNaN(a[i-1][c+1].value)&&(a[i-1][c+1].value+=1)),d&&!isNaN(a[i][c-1].value)&&(a[i][c-1].value+=1),f&&!isNaN(a[i][c+1].value)&&(a[i][c+1].value+=1),m&&(d&&!isNaN(a[i+1][c-1].value)&&(a[i+1][c-1].value+=1),isNaN(a[i+1][c].value)||(a[i+1][c].value+=1),f&&!isNaN(a[i+1][c+1].value)&&(a[i+1][c+1].value+=1))}}return{field:a,startGame:!0,allCells:this.countCellsToOpen(a)}}}]),e}(),h=(t(22),function(e){var n=e.newGame;return l.a.createElement("div",{className:"GameOver"},l.a.createElement("p",null,"Game Over",l.a.createElement("button",{className:"btn btn-primary",onClick:n},"Try new game")))}),C=(t(23),function(e){var n=e.newGame;return l.a.createElement("div",{className:"Winner"},l.a.createElement("p",null,"Congratulations, You won!",l.a.createElement("button",{className:"btn btn-primary",onClick:n},"Try new game")))}),b=function(e){function n(){var e,t;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(t=Object(c.a)(this,(e=Object(m.a)(n)).call.apply(e,[this].concat(l)))).state={colsnum:10,rowsnum:10,difficulty:1,field:null,startGame:!1,gameOver:!1,allCells:null,openedCells:0,sensorFlag:!1},t.GameFieldGenerator=new g,t.handleInput=function(e){var n=e.target;t.setState(Object(u.a)({},n.name,parseInt(n.value)))},t.handleSensorFlag=function(){t.setState(function(e){return{sensorFlag:!e.sensorFlag}})},t.updateFieldSettigns=function(e){var n=t.state.rowsnum+e;n>20||n<10||t.setState({rowsnum:n,colsnum:n})},t.updateLevelSettings=function(e){var n=t.state.difficulty+e;n>3||n<1||t.setState({difficulty:n})},t.handleForm=function(e){e.preventDefault();var n=t.state,a=n.colsnum,l=n.rowsnum,r=n.difficulty,o=t.GameFieldGenerator.generateField(a,l,r);t.setState(o)},t.handleRightClick=function(e){e.preventDefault();var n=e.currentTarget.getAttribute("data-col"),a=e.currentTarget.getAttribute("data-row"),l=t.state.field;l[n][a].open||(l[n][a].marked=!l[n][a].marked,t.setState({field:l}))},t.handleLeftClick=function(e){var n=e.currentTarget.getAttribute("data-col"),a=e.currentTarget.getAttribute("data-row"),l=t.state,r=l.field,o=l.allCells;if(l.sensorFlag)t.handleRightClick(e);else if(!r[n][a].open&&!r[n][a].marked){if(0===r[n][a].value&&t.setState({field:t.openAllCellsBeside(parseInt(n),parseInt(a),r)}),"b"===r[n][a].value)return t.openAllCells(n,a),void t.setState({gameOver:!0});r[n][a].open=!0;var u=t.countOpenedCells(r);o===u&&t.openAllCells(),t.setState({openedCells:u,field:r})}},t.countOpenedCells=function(e){return e.reduce(function(e,n){return e+n.filter(function(e){return e.open}).length},0)},t.openAllCellsBeside=function(e,n,a){var l=t.state,r=l.colsnum,o=l.rowsnum,u=a;u[e][n].open=!0;var s=function(e,n){u[e][n].open=!0,u[e][n].marked=!1},i=e<r-1,c=n>0,m=n<o-1;return e>0&&(c&&(0!==u[e-1][n-1].value||u[e-1][n-1].open?s(e-1,n-1):u=t.openAllCellsBeside(e-1,n-1,u)),0!==u[e-1][n].value||u[e-1][n].open?s(e-1,n):u=t.openAllCellsBeside(e-1,n,u),m&&(0!==u[e-1][n+1].value||u[e-1][n+1].open?s(e-1,n+1):u=t.openAllCellsBeside(e-1,n+1,u))),c&&(0!==u[e][n-1].value||u[e][n-1].open?s(e,n-1):u=t.openAllCellsBeside(e,n-1,u)),m&&(0!==u[e][n+1].value||u[e][n+1].open?s(e,n+1):u=t.openAllCellsBeside(e,n+1,u)),i&&(c&&(0!==u[e+1][n-1].value||u[e+1][n-1].open?s(e+1,n-1):u=t.openAllCellsBeside(e+1,n-1,u)),0!==u[e+1][n].value||u[e+1][n].open?s(e+1,n):u=t.openAllCellsBeside(e+1,n,u),m&&(0!==u[e+1][n+1].value||u[e+1][n+1].open?s(e+1,n+1):u=t.openAllCellsBeside(e+1,n+1,u))),u},t.openAllCells=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=t.state,l=a.field,r=a.colsnum,o=a.rowsnum;null!==e&&null!==n&&(l[e][n].detonated=!0);for(var u=0;u<r;u++)for(var s=0;s<o;s++)l[u][s].open=!0,null===e&&null===n&&"b"===l[u][s].value&&(l[u][s].marked=!0);t.setState({field:l})},t.newGame=function(){t.setState({startGame:!1,gameOver:!1,field:null,allCells:null,openedCells:0,sensorFlag:!1})},t}return Object(d.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this.state,n=e.colsnum,t=e.rowsnum,a=e.difficulty,r=e.startGame,o=e.field,u=e.gameOver,s=e.allCells,i=e.openedCells,c=e.sensorFlag;return l.a.createElement("div",{className:"App"},r?l.a.createElement(p,{field:o,rowsnum:t,sensorFlag:c,onContextMenu:this.handleRightClick,onClick:this.handleLeftClick,handleSensorFlag:this.handleSensorFlag}):l.a.createElement(f,{colsnum:n,difficulty:a,onChange:this.handleInput,onSubmit:this.handleForm,updateFieldSettigns:this.updateFieldSettigns,updateLevelSettings:this.updateLevelSettings}),u?l.a.createElement(h,{newGame:this.newGame}):null,r&&s===i?l.a.createElement(C,{newGame:this.newGame}):null)}}]),n}(a.Component);o.a.render(l.a.createElement(b,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.e5491f2a.chunk.js.map